<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <template id="material_detail_view" name="Material Detailed View">
        <t t-call="website.layout">
            <t t-set="main_object" t-value="material"/>
            <div class="container-fluid main-screen" id="material_view">
                <div class="row">
                    <div class="col-12 course-material-header">
                        <a t-attf-href="/course/enroll/#{slug(course)}"
                           t-if="not enrolled"
                           class="btn btn-primary font-weight-bold text-secondary text-uppercase mr-md-4"
                           style="font-size: 12px;">
                            Back To Course
                        </a>
                        <a class="pull-right text-white toggle-content-item" id="fullscreenwidget" value="0"
                           style="font-size: 26px;"></a>
                    </div>
                    <div class="col-lg-8 col-md-7 col-sm-12 col-xs-12 mx-auto">
                        <div class="container">
                            <div class="col-md-12 col-12 pb16 pt48">
                                <h2 class="mb-lg-0 mb-md-0 text-secondary" style="font-size: 24px;font-weight: bold;"
                                    t-field="material.name"/>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-8 col-md-7 col-sm-12 col-xs-12 pb48 content-summery">
                        <div class="course_img_video">
                            <t t-if="material.full_description">
                                <t t-raw="material.full_description"/>
                            </t>
                            <t t-if="material.material_type == 'url'">
                                <div class="website_url">
                                    <a t-att-href="material.document_url" target="_blank">
                                        <t t-esc="material.document_url"/>
                                    </a>
                                </div>
                            </t>
                            <t t-if="material.datas and material.material_type == 'infographic'">
                                <img t-attf-src="/web/image/op.material/#{material.id}/datas"
                                     class="img-responsive col-12 col-lg-10 col-md-8 mx-auto" style="width:100%"/>
                            </t>
                            <div t-if="material.material_type in ('presentation', 'document')"
                                 class="embed-responsive embed-responsive-4by3 embed-responsive-item mb8 col-12 col-lg-10 col-md-12 mx-auto">
                                <t t-raw="material.embed_code"/>
                            </div>
                            <div t-if="material.material_type == 'video' and material.document_id"
                                 class="embed-responsive embed-responsive-16by9 embed-responsive-item mb8 col-12 col-lg-10 col-md-12 mx-auto">
                                <t t-raw="material.embed_code"/>
                            </div>
                            <div t-if="material.material_type == 'video' and material.datas"
                                 class="embed-responsive embed-responsive-16by9 embed-responsive-item mb8 col-12 col-lg-10 col-md-12 mx-auto">
                                <t t-raw="material.embed_code"/>
                            </div>
                            <div t-if="material.material_type == 'audio'"
                                 class="embed-responsive embed-responsive-16by9 embed-responsive-item mb8 col-12 col-lg-10 col-md-12 mx-auto">
                                <t t-raw="material.embed_code"/>
                            </div>
                            <div t-if="material.material_type == 'quiz'"
                                 class="embed-responsive test-result embed-responsive-item mb8 col-12 col-lg-11 col-md-12 mx-auto">
                                <t t-if="quiz_limit == 1 and is_result == 0">
                                    <center>
                                        <h3>The maximum number of quiz attempts has been reached !</h3>
                                    </center>
                                </t>
                                <t t-if="is_result == 0 and quiz_limit == 0"
                                   t-call="openeducat_quiz.quiz_web_page_single_form"/>
                                <t t-if="is_result == 1 and is_thanks == 0 and quiz_limit == 0"
                                   t-call="openeducat_quiz.quiz_results_form"/>
                                <t t-if="is_result == 1 and is_thanks == 1 and quiz_limit == 0"
                                   t-call="openeducat_quiz.quiz_completed"/>
                            </div>
                            <div class="btn-prev">
                                <a
                                        class="btn btn-lg-block btn-md-block switch-btn">
                                    <i class="fa fa-chevron-left"></i>
                                </a>
                            </div>
                            <div class="btn-next">
                                <a t-attf-href="/course/#{slug(course)}/section/#{slug(section)}/material/#{slug(material)}/1"
                                   t-if="last_material == false"
                                   class="btn btn-lg-block btn-md-block switch-btn">
                                    <i class="fa fa-chevron-right"></i>
                                </a>
                                <a t-attf-href="/course/#{slug(course)}/section/#{slug(section)}/material/#{slug(material)}/1"
                                   t-if="last_material == true"
                                   class="btn btn-lg-block btn-md-block switch-btn">
                                    <i class="fa fa-chevron-right"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-5 col-sm-12 col-xs-12 px-0">
                        <div class="content-width fullscreen-view float-md-right">
                            <div id="related" class="tab-pane active">
                                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 border-0 dyn-height px-0">
                                    <div class="collapse active show" id="course-curriculum">
                                        <div id="accordion" role="tablist" aria-multiselectable="true">
                                            <t t-foreach="related_materials" t-as="section">
                                                <div class="card card-default">
                                                    <div class="card-header p-2 bg-gamma rounded-0"
                                                         t-attf-id="#session-heading-#{section.id}">
                                                        <a class="btn btn-block text-left collapsed rounded-0 font-weight-bold heading"
                                                           data-toggle="collapse"
                                                           aria-expanded="false"
                                                           data-parent="#accordion"
                                                           t-attf-data-target="#session-#{section.id}"
                                                           t-attf-aria-controls="#session-#{section.id}">
                                                            <t t-raw="section.name"/>
                                                        </a>
                                                        <span t-raw="section.display_time"
                                                              class="pull-right total-time-badge"/>
                                                    </div>
                                                    <div t-attf-id="session-#{section.id}"
                                                         class="collapse rounded-0"
                                                         data-parent="#accordion"
                                                         t-attf-aria-labelledby="session-heading-#{section.id}">
                                                        <div class="card-body pt-0 pb-0 px-0">
                                                            <table class="table m-0">
                                                                <tbody>
                                                                    <t t-foreach="related_materials[section]['material']"
                                                                       t-as="material">
                                                                        <tr class="mt8 mb8">
                                                                            <td class="material_icon">
                                                                                <i t-if="material.material_type == 'audio'"
                                                                                   class="fa fa-headphones"></i>
                                                                                <i t-if="material.material_type == 'video'"
                                                                                   class="fa fa-play-circle-o "></i>
                                                                                <i t-if="material.material_type == 'document'"
                                                                                   class="fa fa-file-pdf-o"></i>
                                                                                <i t-if="material.material_type == 'infographic'"
                                                                                   class="fa fa-file-image-o"></i>
                                                                                <i t-if="material.material_type == 'quiz'"
                                                                                   class="fa fa-question-circle"></i>
                                                                            </td>
                                                                            <td>
                                                                                <a t-attf-href="/course/#{slug(course)}/section/#{slug(section)}/material/#{slug(material)}">
                                                                                    <span id="material_name"
                                                                                          class="item-name"
                                                                                          t-raw="material.name"/>
                                                                                    <div class="course-time float-right">
                                                                                        <span id="sectionpoint"
                                                                                              class="hidden-xs hidden-sm pull-right time-badge"
                                                                                              style="font-size: 12px;"
                                                                                              t-esc="'%02d:%02d' % (int(str(material.total_time).split('.')[0]), int(float(str('%.2f' % material.total_time).split('.')[1])/100*60))"
                                                                                        />
                                                                                        <span class="material-right pull-right"
                                                                                              style="padding-right:10px;">
                                                                                            <i t-if="related_materials[section]['material'][material]['completed'] == True"
                                                                                               class="fa fa-check"></i>
                                                                                        </span>
                                                                                    </div>
                                                                                </a>
                                                                            </td>
                                                                        </tr>
                                                                    </t>
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                </div>
                                            </t>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </t>
    </template>
</odoo>
